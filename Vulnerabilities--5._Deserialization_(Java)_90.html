<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>5. Deserialization (Java)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>5. Deserialization (Java)</h1><br/><p>deserialization vulnerabilities are a specific type of security issue that can occur in Java-based applications. Serialization is the process of converting an object into a stream of bytes, which can then be stored or transmitted over a network. Deserialization is the reverse process, where the byte stream is converted back into an object.</p><p></p><p>Deserialization vulnerabilities occur when an attacker is able to manipulate the serialized data in such a way that it causes unexpected behavior during deserialization. This can lead to various types of attacks, including remote code execution (RCE), denial-of-service (DoS), and data tampering.</p><p></p><p>In Java, deserialization vulnerabilities typically occur when untrusted data is passed to the readObject() method of an ObjectInputStream object without proper validation. The readObject() method can be used to deserialize any object that implements the Serializable interface, which means that it can be used to deserialize objects from untrusted sources.</p><p></p><p>For example, let&#39;s say you have a Java application that needs to send an object over the network to another system. You could use serialization to convert the object into a byte stream, which can then be sent over the network and deserialized on the other end back into an object.</p><p></p><p>Here&#39;s some sample code that demonstrates how serialization can be used in Java:</p><p></p><p><div class="codebox"><pre>import java.io.*<span style="color:#ff9d00;font-weight:700">;</span><br /><br />public class MyClass implements Serializable {<br />    private String name<span style="color:#ff9d00;font-weight:700">;</span><br />    private int age<span style="color:#ff9d00;font-weight:700">;</span><br /><br />    public MyClass<span style="color:#ff9d00;font-weight:700">(</span>String name, int age<span style="color:#ff9d00;font-weight:700">)</span> <span style="color:#ff9d00;font-weight:700">{</span><br />        this.name = name<span style="color:#ff9d00;font-weight:700">;</span><br />        this.age = age<span style="color:#ff9d00;font-weight:700">;</span><br />    <span style="color:#ff9d00;font-weight:700">}</span><br /><br />    public void printInfo<span style="color:#ff9d00;font-weight:700">()</span> <span style="color:#ff9d00;font-weight:700">{</span><br />        System.out.println<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&quot;Name: &quot;</span> + name<span style="color:#ff9d00;font-weight:700">);</span><br />        System.out.println<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&quot;Age: &quot;</span> + age<span style="color:#ff9d00;font-weight:700">);</span><br />    <span style="color:#ff9d00;font-weight:700">}</span><br /><br />    public static void main<span style="color:#ff9d00;font-weight:700">(</span>String[] args<span style="color:#ff9d00;font-weight:700">)</span> throws Exception {<br />        MyClass obj = new MyClass<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&quot;John&quot;</span>, 30<span style="color:#ff9d00;font-weight:700">);</span><br /><br />        <span style="color:#ff9d00;font-weight:700">//</span> Serialize the object<br />        FileOutputStream fos = new FileOutputStream<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&quot;data.ser&quot;</span><span style="color:#ff9d00;font-weight:700">);</span><br />        ObjectOutputStream oos = new ObjectOutputStream<span style="color:#ff9d00;font-weight:700">(</span>fos<span style="color:#ff9d00;font-weight:700">);</span><br />        oos.writeObject<span style="color:#ff9d00;font-weight:700">(</span>obj<span style="color:#ff9d00;font-weight:700">);</span><br />        <span style="color:#ffdd00;font-weight:400">oos.close()</span><span style="color:#ff9d00;font-weight:700">;</span><br /><br />        <span style="color:#ff9d00;font-weight:700">//</span> Deserialize the object<br />        FileInputStream fis = new FileInputStream<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">&quot;data.ser&quot;</span><span style="color:#ff9d00;font-weight:700">);</span><br />        ObjectInputStream ois = new ObjectInputStream<span style="color:#ff9d00;font-weight:700">(</span>fis<span style="color:#ff9d00;font-weight:700">);</span><br />        MyClass newObj = <span style="color:#333333;font-weight:400">(MyClass)ois.readObject();<br />        ois.close();<br /><br />        // Print the deserialized object&#39;s info<br />        newObj.printInfo();</span><br /><span style="color:#333333;font-weight:400">    }<br />}</span></pre></div></p><p>In this example, we have a simple class called MyClass that implements the Serializable interface. We create an instance of this class and serialize it to a file using ObjectOutputStream. We then deserialize the object from the file using ObjectInputStream and print its information.</p><p></p><p>In the context of software development, &quot;systems&quot; can refer to different components or modules within a larger application, or it can refer to entirely separate applications running on different machines.</p><p></p><p>There are many reasons why you might need to send objects between systems. For example:</p><p><ol><li>Distributed computing: In a distributed computing environment, different parts of an application may be running on different machines. In order for these parts to communicate with each other, they may need to send objects back and forth.</li></ol></p><p><ol><li>Client-server architecture: In a client-server architecture, the client and server may be running on different machines. The client may need to send objects to the server in order to request data or perform some action.</li></ol></p><p><ol><li>Interoperability: If you have multiple applications written in different programming languages, serialization can be used as a common format for exchanging data between them.</li></ol></p><p><ol><li>Persistence: Serialization can also be used for persisting objects to disk or a database so that they can be loaded later.</li></ol></p><p></p><p>In all of these cases, serialization provides a way for objects to be easily transferred between systems without having to worry about differences in platform or programming language.</p></div>
</body>
</html>
